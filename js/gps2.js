/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2016 OA Wu Design
 */

window.gmc = function () { $(window).trigger ('gm'); };
var OAML = function () { };

var _tl = 10 * 60 * 1000,
    _tlh = 20 * 1000,
    _tlhf = null,
    _ks = [],
    _vpt = null,
    _t = 1000 * 60,
    _vml = false,
    _lat = 23.569,
    _lng = 120.3038,
    _vm = null,
    _vp = null,
    _vz = null,
    _va = null,
    _tr = null,
    _im = false,
    _vy = null,
    _vs = null,
    _v = null,
    _n = 0,
    _vzs = [],
    _tp = 67 * 1000, // points time reload
    _tr2 = 35 * 60 * 1000, // time reload
    _isl = false;

_tlhf = setTimeout (function () { window.location.replace ('https://mazu.ioa.tw/gps.html' + '?f=er'); }, _tlh);

$(function () {

  var $maps = $('#maps');
  var $p = $('#paths');
  var $select = $('#select').change (fsp);
  var $o = $('#o');

  var pss = {
    '1': {n: '陣頭 三月十九 下午路線', p: [['出廟'], ['中山路', [[23.56763,120.30461],[23.56620,120.30434],[23.56527,120.30416],[23.56454,120.30403]], '宮口街'], ['民生路', [[23.56454,120.30402],[23.56437,120.30492]]], ['益安路', [[23.56439,120.30493],[23.56514,120.30505]]], ['信義路', [[23.56514,120.30505],[23.56521,120.30456]]], ['捷發街', [[23.56523,120.30456],[23.56613,120.30473]], '捷發內'], ['光明路', [[23.56613,120.30472],[23.56605,120.30524]]], ['益安路', [[23.56605,120.30524],[23.56552,120.30517]]], ['東興街', [[23.56552,120.30514],[23.56542,120.30561],[23.56527,120.30652]], '水廠後'], ['中秋路', [[23.56528,120.30651],[23.56621,120.30662]], '車仔寮'], ['東勢街', [[23.56621,120.30660],[23.56613,120.30629],[23.56605,120.30599],[23.56599,120.30588],[23.56599,120.30582]]], ['東華巷', [[23.56599,120.30582],[23.56612,120.30587],[23.56637,120.30590],[23.56652,120.30589],[23.56661,120.30585],[23.56662,120.30574]]], ['彌陀寺前', [[23.56663,120.30574],[23.56676,120.30573],[23.56695,120.30578],[23.56716,120.30586],[23.56728,120.30550]]], ['中央市場後', [[23.56728,120.30548],[23.56765,120.30554]], '豬砧後'], ['厚生路', [[23.56763,120.30557],[23.56773,120.30492]]], ['媽祖廟後', [[23.56774,120.30492],[23.56822,120.30500],[23.56834,120.30498],[23.56842,120.30489],[23.56845,120.30481]]], ['國宮旅社前', [[23.56844,120.30480],[23.56874,120.30498],[23.56891,120.30510]]], ['仁和路', [[23.56890,120.30512],[23.56958,120.30557],[23.56998,120.30587],[23.57001,120.30588],[23.57025,120.30586]], '蜊仔街'], ['三連街', [[23.57024,120.30586],[23.57041,120.30547],[23.57057,120.30521],[23.57062,120.30504]]], ['公館街', [[23.57063,120.30504],[23.57054,120.30501],[23.57045,120.30496],[23.57030,120.30493]]], ['大同路', [[23.57030,120.30493],[23.57047,120.30451]]], ['博愛路大復戲院前', [[23.57046,120.30451],[23.56954,120.30411]], '舊戲園'], ['賜福街', [[23.56957,120.30406],[23.56975,120.30403],[23.57037,120.30388],[23.57076,120.30373],[23.57079,120.30366]], '大復戲院(舊戲園)後'], ['義民路', [[23.57084,120.30359],[23.57181,120.30402]], '原北港戲院(新戲園)前'], ['復興街', [[23.57181,120.30402],[23.57214,120.30303]]], ['文化路', [[23.57218,120.30301],[23.57268,120.30321],[23.57313,120.30343],[23.57413,120.30396]], '王應東橋公園口'], ['民有路', [[23.57414,120.30395],[23.57377,120.30280]], '舊鎮托兒所前'], ['公園路', [[23.57377,120.30280],[23.57302,120.30308]]], ['民族路', [[23.57301,120.30309],[23.57274,120.30212],[23.57236,120.30087]], '南風汽水場前'], ['文昌路', [[23.57236,120.30086],[23.57309,120.30059]], '原國宮戲院前'], ['民有路', [[23.57310,120.30060],[23.57287,120.29985]]], ['華勝路', [[23.57288,120.29986],[23.57363,120.29960]]], ['民治路', [[23.57364,120.29960],[23.57386,120.30033]]], ['文昌路', [[23.57385,120.30033],[23.57311,120.30060]]], ['民有路', [[23.57310,120.30059],[23.57337,120.30151]], '都城隍廟'], ['華興街', [[23.57338,120.30151],[23.57413,120.30124]], '聖安宮側'], ['民治路', [[23.57414,120.30124],[23.57425,120.30162]]], ['吉祥路', [[23.57424,120.30163],[23.57348,120.30185]], '清潔隊前'], ['民有路', [[23.57347,120.30184],[23.57378,120.30280]], '天主教堂前'], ['公園路', [[23.57378,120.30279],[23.57453,120.30254],[23.57531,120.30221],[23.57624,120.30187],[23.57685,120.30166],[23.57719,120.30153]], '原農田水利會前'], ['文星路', [[23.57719,120.30152],[23.57692,120.30061]]], ['吉祥路', [[23.57691,120.30061],[23.57650,120.30076],[23.57597,120.30100],[23.57500,120.30131]]], ['民享路', [[23.57501,120.30131],[23.57464,120.30004]]], ['文昌路', [[23.57464,120.30004],[23.57559,120.29971],[23.57653,120.29938],[23.57730,120.29910]]], ['文明路右轉', [[23.57729,120.29909],[23.57769,120.30034]]], ['吉祥路左轉', [[23.57769,120.30034],[23.57790,120.30031],[23.57842,120.30011]]], ['文仁路左轉', [[23.57842,120.30011],[23.57805,120.29886]]], ['文昌路', [[23.57804,120.29885],[23.57729,120.29909]]], ['文明路', [[23.57730,120.29909],[23.57705,120.29823],[23.57684,120.29758],[23.57660,120.29684],[23.57646,120.29653]]], ['文明路155巷', [[23.57647,120.29653],[23.57624,120.29668],[23.57623,120.29678],[23.57651,120.29771]]], ['仁愛路', [[23.57651,120.29771],[23.57607,120.29787],[23.57572,120.29799],[23.57511,120.29819],[23.57504,120.29822],[23.57418,120.29855]]], ['民享路', [[23.57418,120.29855],[23.57441,120.29932],[23.57463,120.30005]]], ['文昌路', [[23.57462,120.30004],[23.57386,120.30032]], '水利局前'], ['民治路', [[23.57386,120.30032],[23.57364,120.29959]]], ['華勝路', [[23.57363,120.29959],[23.57308,120.29977]]], ['勝利街', [[23.57308,120.29978],[23.57300,120.29931],[23.57296,120.29891],[23.57259,120.29878]]], ['大同路', [[23.57258,120.29878],[23.57228,120.29965],[23.57219,120.30009],[23.57196,120.30080],[23.57174,120.30144],[23.57123,120.30256]], '北埔路頭'], ['文化路', [[23.57123,120.30257],[23.57055,120.30223]]], ['公民路', [[23.57055,120.30223],[23.57003,120.30320]], '陳聖王廟前'], ['義民路', [[23.57003,120.30319],[23.56928,120.30282]]], ['中正路', [[23.56925,120.30282],[23.56885,120.30386]], '石頭路'], ['電信局前', [[23.56885,120.30387],[23.56847,120.30456]]], ['媽祖廟西邊', [[23.56846,120.30456],[23.56835,120.30447],[23.56797,120.30435]]], ['民主路', [[23.56797,120.30435],[23.56812,120.30360],[23.56838,120.30243]], '橫街'], ['土銀前', [[23.56839,120.30243],[23.56867,120.30153]]], ['郵局前', [[23.56866,120.30154],[23.56875,120.30148],[23.56883,120.30142],[23.56928,120.30167],[23.56965,120.30180]], '圓環'], ['中正路左轉', [[23.56964,120.30179],[23.57021,120.30036]]], ['民權路', [[23.57019,120.30035],[23.56913,120.29967]]], ['民主路左轉', [[23.56912,120.29969],[23.56876,120.30116]]], ['文化路右轉', [[23.56874,120.30118],[23.56860,120.30117],[23.56851,120.30128],[23.56765,120.30119]]], ['文化路27巷', [[23.56768,120.30119],[23.56756,120.30071],[23.56739,120.30075],[23.56724,120.30092]]], ['右轉西勢街慈德寺前', [[23.56723,120.30093],[23.56704,120.30038],[23.56703,120.30001],[23.56687,120.29998]]], ['光明路', [[23.56686,120.29998],[23.56656,120.30203]]], ['義民路', [[23.56656,120.30205],[23.56572,120.30186],[23.56554,120.30284]]], ['信義路', [[23.56554,120.30283],[23.56599,120.30299],[23.56600,120.30309],[23.56594,120.30324]], '52巷'], ['博愛路', [[23.56594,120.30322],[23.56549,120.30307]], '溝仔墘'], ['信義路', [[23.56548,120.30305],[23.56527,120.30419]]], ['中山路', [[23.56528,120.30415],[23.56619,120.30434]]], ['光明路', [[23.56619,120.30434],[23.56636,120.30326]]], ['博愛路', [[23.56637,120.30325],[23.56736,120.30344]], '舊蕃簽市'], ['中華路', [[23.56734,120.30344],[23.56729,120.30371],[23.56717,120.30450]]], ['中山路', [[23.56713,120.30448],[23.56761,120.30460]]], ['入廟']]},
    '2': {n: '陣頭 三月十九 晚間路線', p: [['出廟'], ['中山路', [[23.56762,120.30462],[23.56714,120.30450],[23.56619,120.30434],[23.56527,120.30416],[23.56454,120.30401]], '宮口街'], ['民生路', [[23.56456,120.30402],[23.56482,120.30274]], '溪墘尾'], ['博愛路', [[23.56482,120.30275],[23.56506,120.30282],[23.56526,120.30293],[23.56549,120.30299],[23.56552,120.30310],[23.56637,120.30335]], '溝仔墘'], ['光明路', [[23.56636,120.30333],[23.56657,120.30199]], '麥仔程'], ['南陽國小前', [[23.56655,120.30199],[23.56669,120.30105]]], ['文化路', [[23.56669,120.30105],[23.56725,120.30115]]], ['西勢街', [[23.56724,120.30114],[23.56724,120.30142],[23.56743,120.30166],[23.56752,120.30224]]], ['旌義街', [[23.56751,120.30225],[23.56760,120.30251],[23.56763,120.30279],[23.56763,120.30299]]], ['義民廟前', [[23.56764,120.30300],[23.56768,120.30301]]], ['民榮街', [[23.56765,120.30300],[23.56822,120.30311]], '打鐵街'], ['褒新街', [[23.56826,120.30312],[23.56861,120.30336],[23.56876,120.30336],[23.56898,120.30272]], '埔仔新街'], ['福泰大飯店', [[23.56898,120.30272],[23.56926,120.30285]]], ['中正路', [[23.56927,120.30284],[23.56966,120.30180]]], ['花旗銀行前', [[23.56964,120.30181],[23.56935,120.30170]]], ['郵局前', [[23.56931,120.30168],[23.56881,120.30144],[23.56884,120.30126],[23.56871,120.30116]], '圓環'], ['民眾服務站前', [[23.56874,120.30116],[23.56893,120.30039],[23.56914,120.29969]]], ['民權路', [[23.56914,120.29970],[23.56977,120.30008],[23.57020,120.30038]]], ['中正路', [[23.57021,120.30037],[23.57001,120.30094]]], ['新民路', [[23.57001,120.30094],[23.57050,120.30113],[23.57155,120.30181]]], ['大同路', [[23.57156,120.30181],[23.57121,120.30256],[23.57083,120.30357]]], ['義民路', [[23.57082,120.30357],[23.57004,120.30322]]], ['公民路', [[23.57004,120.30321],[23.56953,120.30413]]], ['博愛路', [[23.56954,120.30412],[23.56932,120.30409],[23.56883,120.30384],[23.56812,120.30360]], '溪仔底'], ['民主路', [[23.56812,120.30359],[23.56798,120.30439]], '橫街仔'], ['媽祖廟西邊', [[23.56798,120.30436],[23.56824,120.30443],[23.56840,120.30450],[23.56847,120.30461],[23.56845,120.30483]]], ['仁和路', [[23.56844,120.30481],[23.56890,120.30511]]], ['公民路', [[23.56890,120.30512],[23.56937,120.30438]], '國宮旅行社邊'], ['仁德街', [[23.56938,120.30437],[23.56966,120.30462],[23.56995,120.30479],[23.57030,120.30493]]], ['大同路', [[23.57031,120.30493],[23.56996,120.30588]], '牛車路'], ['益安路', [[23.56998,120.30588],[23.56871,120.30621],[23.56856,120.30622],[23.56833,120.30600],[23.56763,120.30554],[23.56731,120.30553]]], ['彌陀寺前', [[23.56730,120.30553],[23.56709,120.30609]]], ['中秋路', [[23.56707,120.30613],[23.56654,120.30662],[23.56643,120.30663],[23.56581,120.30657]], '車仔寮'], ['東榮街', [[23.56582,120.30655],[23.56588,120.30599],[23.56601,120.30593],[23.56601,120.30547]]], ['東陽巷', [[23.56600,120.30546],[23.56573,120.30540],[23.56548,120.30535],[23.56542,120.30560]]], ['水源街', [[23.56545,120.30563],[23.56483,120.30551],[23.56428,120.30539]], '水道頭'], ['民生路', [[23.56427,120.30539],[23.56436,120.30491],[23.56454,120.30403]]], ['中正路', [[23.56454,120.30403],[23.56527,120.30416],[23.56620,120.30434],[23.56716,120.30451],[23.56763,120.30464]]], ['入廟']]},
    '3': {n: '陣頭 三月二十 下午路線', p: [['出廟'], ['中山路', [[23.56763,120.30463],[23.56618,120.30435],[23.56524,120.30417],[23.56454,120.30403]], '宮口街'], ['民生路', [[23.56454,120.30404],[23.56501,120.30183]]], ['義民路', [[23.56500,120.30186],[23.56655,120.30212]], '陸橋東'], ['光明路', [[23.56654,120.30212],[23.56639,120.30328]], '麥仔程'], ['博愛路', [[23.56638,120.30328],[23.56778,120.30353],[23.56811,120.30360],[23.56884,120.30387],[23.56933,120.30410],[23.56953,120.30413],[23.57046,120.30453],[23.57086,120.30468],[23.57148,120.30491]], '溪仔底'], ['代天宮前', [[23.57149,120.30490],[23.57166,120.30443]], '十六神'], ['義民路192巷', [[23.57166,120.30443],[23.57192,120.30451],[23.57203,120.30447],[23.57212,120.30408]], '新吉巷'], ['義民路', [[23.57213,120.30408],[23.57247,120.30416],[23.57299,120.30432],[23.57307,120.30442],[23.57337,120.30447],[23.57340,120.30438],[23.57369,120.30432],[23.57398,120.30416],[23.57416,120.30397]], '向北'], ['文化路', [[23.57416,120.30397],[23.57447,120.30416],[23.57525,120.30456],[23.57533,120.30474],[23.57528,120.30508],[23.57532,120.30521],[23.57552,120.30545],[23.57553,120.30554]], '公園內就神社'], ['太平路', [[23.57553,120.30553],[23.57602,120.30585],[23.57620,120.30595],[23.57701,120.30610],[23.57766,120.30610],[23.57826,120.30605],[23.57895,120.30598],[23.57958,120.30591]], '沙崙仔'], ['文仁路', [[23.57958,120.30589],[23.57978,120.30466],[23.57976,120.30445],[23.57933,120.30313],[23.57916,120.30249],[23.57868,120.30098]]], ['公園路', [[23.57867,120.30096],[23.57624,120.30188]]], ['民政路', [[23.57624,120.30188],[23.57662,120.30302]]], ['北辰路', [[23.57659,120.30301],[23.57540,120.30248],[23.57476,120.30320]]], ['民治路', [[23.57472,120.30322],[23.57451,120.30252]]], ['公園路', [[23.57452,120.30253],[23.57301,120.30309]], '舊水利會前'], ['民族路', [[23.57302,120.30309],[23.57274,120.30213]]], ['吉祥路', [[23.57271,120.30212],[23.57348,120.30188]]], ['民有路', [[23.57348,120.30187],[23.57310,120.30059]], '都城隍廟'], ['文昌路', [[23.57310,120.30060],[23.57386,120.30030]], '舊水利局前'], ['民治路', [[23.57387,120.30031],[23.57454,120.30255]]], ['公園路', [[23.57452,120.30254],[23.57532,120.30223]]], ['民享路', [[23.57531,120.30224],[23.57442,120.29933]]], ['華勝路', [[23.57442,120.29931],[23.57535,120.29899]]], ['民政路', [[23.57535,120.29898],[23.57585,120.30052],[23.57624,120.30186]]], ['公園路', [[23.57624,120.30188],[23.57718,120.30149]]], ['文星路', [[23.57719,120.30150],[23.57668,120.29985],[23.57631,120.29864]]], ['華勝路', [[23.57632,120.29864],[23.57711,120.29843]]], ['文明路', [[23.57711,120.29843],[23.57665,120.29691],[23.57654,120.29669],[23.57626,120.29615],[23.57603,120.29582],[23.57464,120.29424]]], ['大同路516巷出', [[23.57463,120.29424],[23.57443,120.29434],[23.57419,120.29436],[23.57404,120.29434]]], ['長安街', [[23.57404,120.29433],[23.57338,120.29422]]], ['協和街', [[23.57340,120.29423],[23.57351,120.29380]]], ['長治街', [[23.57350,120.29378],[23.57288,120.29368]]], ['介壽街', [[23.57288,120.29369],[23.57309,120.29250]]], ['文仁路', [[23.57310,120.29249],[23.57449,120.29290]]], ['大同路右轉', [[23.57449,120.29291],[23.57417,120.29381]]], ['舊太子宮邊', [[23.57416,120.29380],[23.57462,120.29422]]], ['懷恩街', [[23.57465,120.29422],[23.57522,120.29358]]], ['文仁路', [[23.57521,120.29359],[23.57680,120.29531],[23.57700,120.29569]]], ['民樂路', [[23.57699,120.29568],[23.57553,120.29655]]], ['文星路', [[23.57552,120.29656],[23.57589,120.29723],[23.57607,120.29788]]], ['仁愛路', [[23.57608,120.29786],[23.57510,120.29819]]], ['民政路', [[23.57511,120.29818],[23.57535,120.29897]]], ['華勝路', [[23.57534,120.29896],[23.57364,120.29960]], '南向'], ['民治路', [[23.57366,120.29959],[23.57318,120.29801]]], ['民樂路', [[23.57318,120.29801],[23.57388,120.29762]], '北向'], ['民享路', [[23.57389,120.29761],[23.57380,120.29744],[23.57322,120.29682]], '西三角地帶'], ['大同路', [[23.57322,120.29681],[23.57269,120.29847],[23.57212,120.30030],[23.57194,120.30092],[23.57122,120.30258],[23.57083,120.30357]], '北埔路頭'], ['義民路', [[23.57083,120.30357],[23.56929,120.30284]]], ['中正路', [[23.56928,120.30284],[23.56963,120.30181]], '石頭路'], ['花旗銀行前', [[23.56961,120.30184],[23.56932,120.30169]]], ['郵局前', [[23.56932,120.30170],[23.56884,120.30146]], '圓環'], ['文化路', [[23.56886,120.30147],[23.56880,120.30121],[23.56867,120.30116],[23.56854,120.30124],[23.56853,120.30133],[23.56766,120.30116],[23.56667,120.30105]]], ['光明路', [[23.56668,120.30106],[23.56656,120.30210]], '南陽國小前'], ['義民路', [[23.56653,120.30210],[23.56752,120.30226]]], ['旌義街', [[23.56752,120.30226],[23.56764,120.30270],[23.56761,120.30301]], '義民廟口'], ['義民廟前', [[23.56762,120.30301],[23.56773,120.30301],[23.56777,120.30352]]], ['博愛路', [[23.56778,120.30353],[23.56735,120.30343]]], ['中華路', [[23.56735,120.30344],[23.56731,120.30365]]], ['共和街', [[23.56729,120.30360],[23.56700,120.30360],[23.56680,120.30354],[23.56669,120.30346],[23.56659,120.30344]], '舊蕃簽市'], ['安和街', [[23.56659,120.30344],[23.56643,120.30439]], '暗街仔'], ['中山路', [[23.56643,120.30439],[23.56622,120.30436]]], ['光明路', [[23.56620,120.30436],[23.56609,120.30504]], '老鼠仔衛生'], ['德為街', [[23.56607,120.30501],[23.56581,120.30492],[23.56518,120.30482]], '竹圍仔內'], ['信義路', [[23.56517,120.30482],[23.56527,120.30414],[23.56536,120.30376]]], ['興南街', [[23.56536,120.30377],[23.56464,120.30355]]], ['民生路', [[23.56465,120.30356],[23.56454,120.30405],[23.56438,120.30493]]], ['益安路', [[23.56437,120.30493],[23.56515,120.30506],[23.56552,120.30516],[23.56605,120.30524],[23.56700,120.30543]]], ['中華路', [[23.56699,120.30545],[23.56715,120.30451]]], ['中山路', [[23.56715,120.30452],[23.56764,120.30460]]], ['入廟']]},
    '4': {n: '陣頭 三月二十 晚間路線', p: [['出廟'], ['中山路', [[23.56763,120.30463],[23.56714,120.30451],[23.56620,120.30434],[23.56454,120.30403]], '宮口街'], ['民生路', [[23.56455,120.30402],[23.56427,120.30541]], '水道頭'], ['水源街', [[23.56428,120.30540],[23.56542,120.30562]]], ['東興街', [[23.56542,120.30562],[23.56552,120.30514]]], ['益安路', [[23.56552,120.30514],[23.56604,120.30523],[23.56655,120.30534],[23.56738,120.30552],[23.56763,120.30553],[23.56834,120.30602]], '豬砧後'], ['公民路', [[23.56835,120.30601],[23.56892,120.30511]]], ['仁和路', [[23.56890,120.30511],[23.56959,120.30558],[23.56997,120.30589],[23.57025,120.30586],[23.57093,120.30588],[23.57117,120.30583]], '蜊仔街'], ['三連街', [[23.57117,120.30584],[23.57137,120.30517]]], ['公館街', [[23.57137,120.30517],[23.57104,120.30509],[23.57063,120.30504],[23.57043,120.30496],[23.57030,120.30493]], '公館口'], ['仁德街', [[23.57030,120.30493],[23.56994,120.30478],[23.56967,120.30462],[23.56936,120.30437]]], ['舊台南中小企銀前', [[23.56937,120.30435],[23.56953,120.30412]]], ['博愛路', [[23.56953,120.30412],[23.56931,120.30409]]], ['中興街', [[23.56930,120.30409],[23.56875,120.30501]]], ['媽祖廟東邊', [[23.56875,120.30500],[23.56845,120.30482],[23.56836,120.30498],[23.56825,120.30502],[23.56775,120.30493]]], ['媽祖廟前', [[23.56775,120.30493],[23.56765,120.30481],[23.56762,120.30461],[23.56768,120.30447],[23.56782,120.30436]]], ['媽祖廟西邊', [[23.56782,120.30436],[23.56793,120.30436],[23.56831,120.30445],[23.56841,120.30449],[23.56846,120.30457]]], ['中正路', [[23.56846,120.30455],[23.56885,120.30385],[23.56926,120.30284],[23.56965,120.30182]], '石頭路'], ['文化路', [[23.56966,120.30181],[23.57026,120.30212],[23.57054,120.30225]]], ['嘉義客運前公民路', [[23.57053,120.30227],[23.57003,120.30323]]], ['義民路', [[23.57003,120.30324],[23.57083,120.30357]]], ['大同路', [[23.57083,120.30357],[23.57046,120.30452]]], ['博愛路', [[23.57046,120.30451],[23.57086,120.30466],[23.57148,120.30490]]], ['代天宮前', [[23.57149,120.30490],[23.57166,120.30444]]], ['復興街', [[23.57166,120.30444],[23.57198,120.30350],[23.57215,120.30300]], '公車巷'], ['文化路', [[23.57214,120.30300],[23.57121,120.30256],[23.57053,120.30225],[23.56963,120.30181]], '王應東橋'], ['郵局前', [[23.56963,120.30180],[23.56883,120.30144]], '圓環'], ['文化路', [[23.56884,120.30144],[23.56883,120.30126],[23.56873,120.30117],[23.56861,120.30117],[23.56853,120.30130],[23.56843,120.30129],[23.56794,120.30123],[23.56766,120.30118]]], ['文化路27巷', [[23.56766,120.30116],[23.56760,120.30093],[23.56754,120.30071],[23.56743,120.30074],[23.56732,120.30082],[23.56725,120.30091],[23.56721,120.30092]]], ['文明巷', [[23.56721,120.30092],[23.56712,120.30067],[23.56704,120.30039]]], ['慈德堂前', [[23.56704,120.30038],[23.56703,120.30005],[23.56697,120.30000],[23.56687,120.29999]]], ['光明路', [[23.56688,120.29999],[23.56677,120.30058]]], ['南陽國小前', [[23.56677,120.30049],[23.56669,120.30104]]], ['文化路', [[23.56668,120.30104],[23.56724,120.30113]]], ['西勢街', [[23.56723,120.30113],[23.56724,120.30142],[23.56738,120.30160],[23.56745,120.30172],[23.56751,120.30225]]], ['義民路', [[23.56750,120.30224],[23.56821,120.30238],[23.56839,120.30245]]], ['民主路', [[23.56840,120.30244],[23.56823,120.30311],[23.56811,120.30359]]], ['博愛路', [[23.56811,120.30359],[23.56775,120.30354],[23.56695,120.30336],[23.56637,120.30326]]], ['光明路', [[23.56637,120.30327],[23.56625,120.30395]]], ['新興街', [[23.56625,120.30395],[23.56537,120.30372]]], ['信義路', [[23.56537,120.30372],[23.56550,120.30298],[23.56567,120.30196]]], ['義民路', [[23.56566,120.30197],[23.56500,120.30184]]], ['民生路', [[23.56500,120.30184],[23.56483,120.30275],[23.56455,120.30402]], '溪墘尾'], ['中山路', [[23.56455,120.30402],[23.56529,120.30416],[23.56620,120.30434],[23.56717,120.30450],[23.56763,120.30463]]], ['入廟']]},
    
    '5': {n: '藝閣 三月十九 下午路線', p: [['廟前起馬'], ['中山路', [[23.56762,120.30462],[23.56715,120.30451],[23.56620,120.30435],[23.56526,120.30414],[23.56453,120.30400],[23.56430,120.30398]]], ['東引道', [[23.56430,120.30398],[23.56445,120.30311],[23.56472,120.30174]]], ['陸橋', [[23.56471,120.30173],[23.56524,120.30184],[23.56579,120.30194]]], ['義民路', [[23.56578,120.30194],[23.56656,120.30208],[23.56752,120.30225],[23.56822,120.30237],[23.56840,120.30245]]], ['民主路', [[23.56840,120.30243],[23.56865,120.30152],[23.56873,120.30153],[23.56875,120.30153]]], ['文化路', [[23.56876,120.30153],[23.56882,120.30147],[23.56883,120.30144],[23.56909,120.30157],[23.56964,120.30181],[23.57054,120.30226],[23.57121,120.30256]]], ['大同路', [[23.57121,120.30256],[23.57169,120.30152],[23.57197,120.30080],[23.57220,120.30008]]], ['華勝路', [[23.57219,120.30009],[23.57289,120.29985],[23.57364,120.29959],[23.57441,120.29932]]], ['民享路', [[23.57441,120.29932],[23.57502,120.30130],[23.57531,120.30222]]], ['公園路', [[23.57531,120.30221],[23.57452,120.30253]]], ['民治路', [[23.57452,120.30252],[23.57473,120.30323]]], ['北辰路', [[23.57473,120.30324],[23.57415,120.30397]], '公園南側'], ['文化路', [[23.57415,120.30396],[23.57447,120.30418],[23.57499,120.30444],[23.57529,120.30459],[23.57534,120.30471],[23.57531,120.30491],[23.57529,120.30510],[23.57544,120.30532],[23.57552,120.30545],[23.57552,120.30553]], '老人會館'], ['太平路', [[23.57552,120.30552],[23.57616,120.30592],[23.57632,120.30598],[23.57660,120.30602],[23.57703,120.30610],[23.57717,120.30610],[23.57767,120.30610],[23.57959,120.30591]]], ['文仁路', [[23.57959,120.30590],[23.57973,120.30502],[23.57977,120.30457],[23.57976,120.30445],[23.57934,120.30313]]], ['北辰路', [[23.57934,120.30313],[23.57792,120.30363],[23.57780,120.30363],[23.57660,120.30299],[23.57566,120.30260],[23.57543,120.30248],[23.57531,120.30222]]], ['公園路', [[23.57531,120.30221],[23.57685,120.30165],[23.57869,120.30097]]], ['文仁路', [[23.57868,120.30097],[23.57787,120.29818]]], ['華勝路', [[23.57787,120.29818],[23.57711,120.29842]]], ['文明路', [[23.57710,120.29842],[23.57684,120.29758]]], ['仁愛路', [[23.57684,120.29758],[23.57607,120.29785],[23.57571,120.29800],[23.57512,120.29820],[23.57502,120.29821],[23.57418,120.29856]]], ['民享路', [[23.57419,120.29857],[23.57441,120.29931]]], ['華勝路', [[23.57442,120.29931],[23.57299,120.29981],[23.57220,120.30009],[23.57213,120.30011]]], ['華南路', [[23.57213,120.30010],[23.57107,120.29987]], '第二停車場'], ['休息']]},
    '6': {n: '藝閣 三月十九 晚間路線', p: [['廟前出發'], ['中山路', [[23.56763,120.30463],[23.56717,120.30451],[23.56613,120.30433],[23.56435,120.30398]]], ['東引道', [[23.56431,120.30399],[23.56458,120.30235],[23.56470,120.30173]]], ['陸橋', [[23.56470,120.30174],[23.56575,120.30193]]], ['義民路', [[23.56573,120.30192],[23.56669,120.30210],[23.56786,120.30230],[23.56814,120.30235],[23.56835,120.30243],[23.56927,120.30284],[23.57004,120.30321],[23.57082,120.30357]]], ['大同路', [[23.57082,120.30357],[23.57136,120.30220],[23.57182,120.30117],[23.57197,120.30081]]], ['文昌路', [[23.57197,120.30080],[23.57211,120.30084],[23.57225,120.30088],[23.57234,120.30086]]], ['民族路', [[23.57234,120.30085],[23.57274,120.30213],[23.57312,120.30345]]], ['文化路', [[23.57312,120.30344],[23.57415,120.30399]]], ['民有路', [[23.57415,120.30399],[23.57374,120.30272],[23.57329,120.30121],[23.57287,120.29985]]], ['華勝路', [[23.57287,120.29987],[23.57365,120.29959]]], ['民治路', [[23.57365,120.29959],[23.57318,120.29802]]], ['民樂路', [[23.57318,120.29802],[23.57388,120.29761],[23.57472,120.29706]]], ['民政路', [[23.57471,120.29706],[23.57491,120.29746],[23.57512,120.29821],[23.57537,120.29902],[23.57564,120.29990],[23.57598,120.30098],[23.57625,120.30188]]], ['公園路', [[23.57624,120.30188],[23.57719,120.30152]]], ['文星路', [[23.57719,120.30152],[23.57676,120.30013],[23.57632,120.29865]]], ['華勝路', [[23.57632,120.29865],[23.57534,120.29898],[23.57405,120.29944],[23.57285,120.29986],[23.57219,120.30008]]], ['大同路', [[23.57219,120.30007],[23.57197,120.30081],[23.57156,120.30179],[23.57121,120.30255]]], ['文化路', [[23.57121,120.30256],[23.57033,120.30216],[23.56961,120.30179],[23.56881,120.30143],[23.56878,120.30150],[23.56875,120.30152]]], ['民主路', [[23.56874,120.30153],[23.56864,120.30153],[23.56838,120.30244]]], ['義民路', [[23.56838,120.30243],[23.56816,120.30235],[23.56652,120.30206],[23.56574,120.30194]]], ['陸橋', [[23.56577,120.30195],[23.56469,120.30175]]], ['東引道', [[23.56472,120.30176],[23.56430,120.30393]]], ['中山路', [[23.56428,120.30397],[23.56485,120.30408],[23.56553,120.30420],[23.56623,120.30434],[23.56716,120.30451],[23.56767,120.30464]]], ['休息']]},
    '7': {n: '藝閣 三月二十 下午路線', p: [['廟前出發'], ['中山路', [[23.56767,120.30465],[23.56715,120.30451],[23.56619,120.30434],[23.56527,120.30415],[23.56429,120.30399]]], ['東引道', [[23.56430,120.30398],[23.56471,120.30175]]], ['陸橋', [[23.56471,120.30175],[23.56577,120.30194]]], ['義民路', [[23.56577,120.30194],[23.56657,120.30209],[23.56757,120.30226],[23.56822,120.30236],[23.56839,120.30245],[23.56926,120.30286],[23.57005,120.30323],[23.57082,120.30357]]], ['大同路', [[23.57082,120.30357],[23.57121,120.30257],[23.57164,120.30161],[23.57188,120.30105],[23.57220,120.30008]]], ['華勝路', [[23.57219,120.30009],[23.57294,120.29983],[23.57405,120.29944],[23.57441,120.29932]]], ['民享路', [[23.57442,120.29932],[23.57418,120.29855],[23.57393,120.29776],[23.57387,120.29762]]], ['民樂路', [[23.57388,120.29762],[23.57439,120.29727],[23.57506,120.29687],[23.57591,120.29634],[23.57624,120.29614]]], ['文明路', [[23.57625,120.29613],[23.57605,120.29580],[23.57540,120.29509],[23.57463,120.29422]]], ['懷恩街', [[23.57464,120.29422],[23.57521,120.29357]]], ['文仁路', [[23.57520,120.29356],[23.57615,120.29460],[23.57679,120.29532],[23.57699,120.29568]]], ['民樂路', [[23.57700,120.29568],[23.57771,120.29519],[23.57848,120.29472]]], ['穎寧路', [[23.57848,120.29473],[23.57867,120.29559],[23.57896,120.29719],[23.57902,120.29759],[23.57908,120.29782],[23.57912,120.29807]]], ['華勝路', [[23.57913,120.29809],[23.58248,120.29897],[23.58362,120.29928]]], ['北辰派出所前', [[23.58356,120.29927],[23.58379,120.29934]]], ['新街巡天宮前迴轉南向', [[23.58357,120.29928],[23.58779,120.30045]]], ['北辰派出所前', [[23.58361,120.29928],[23.58348,120.29923]]], ['華勝路', [[23.58353,120.29926],[23.58322,120.29917],[23.57918,120.29810],[23.57876,120.29796],[23.57845,120.29797],[23.57786,120.29818]]], ['文仁路', [[23.57786,120.29817],[23.57805,120.29885],[23.57842,120.30011]]], ['吉祥路', [[23.57842,120.30010],[23.57788,120.30031],[23.57767,120.30035]]], ['文明路', [[23.57768,120.30035],[23.57795,120.30124]]], ['公園路', [[23.57795,120.30124],[23.57721,120.30153]]], ['文星路', [[23.57720,120.30153],[23.57690,120.30062]]], ['吉祥路', [[23.57691,120.30061],[23.57598,120.30097],[23.57501,120.30129],[23.57425,120.30162],[23.57348,120.30187]]], ['民有路', [[23.57348,120.30187],[23.57289,120.29985]]], ['華勝路', [[23.57289,120.29985],[23.57212,120.30011]]], ['華南路', [[23.57214,120.30011],[23.57170,120.30002],[23.57110,120.29988]], '第二停車場'], ['休息']]},
    '8': {n: '藝閣 三月二十 晚間路線', p: [['廟前出發'], ['中山路', [[23.56763,120.30462],[23.56714,120.30451],[23.56526,120.30417],[23.56454,120.30401]]], ['民生路', [[23.56455,120.30402],[23.56473,120.30310],[23.56499,120.30186]]], ['義民路', [[23.56507,120.30181],[23.56595,120.30199],[23.56713,120.30218],[23.56818,120.30236],[23.56838,120.30246]]], ['民主路', [[23.56840,120.30244],[23.56866,120.30153],[23.56875,120.30149],[23.56881,120.30144]]], ['文化路', [[23.56882,120.30144],[23.56965,120.30182]]], ['中正路', [[23.56964,120.30183],[23.56927,120.30285],[23.56885,120.30386],[23.56848,120.30453],[23.56848,120.30468],[23.56844,120.30483]]], ['仁和路', [[23.56847,120.30482],[23.56874,120.30499],[23.56900,120.30519],[23.56957,120.30557],[23.56997,120.30589]]], ['大同路', [[23.56997,120.30588],[23.57032,120.30493],[23.57083,120.30357],[23.57120,120.30254],[23.57173,120.30141],[23.57197,120.30081]]], ['文昌路', [[23.57198,120.30082],[23.57218,120.30086],[23.57234,120.30087],[23.57386,120.30031],[23.57560,120.29972],[23.57652,120.29937],[23.57730,120.29910]]], ['文明路', [[23.57730,120.29910],[23.57710,120.29840]]], ['華勝路', [[23.57711,120.29841],[23.57534,120.29897]]], ['民政路', [[23.57534,120.29897],[23.57557,120.29970],[23.57599,120.30098],[23.57625,120.30188]]], ['公園路', [[23.57625,120.30188],[23.57514,120.30227],[23.57451,120.30253],[23.57313,120.30302],[23.57265,120.30321]]], ['文化路', [[23.57264,120.30321],[23.57206,120.30298],[23.57099,120.30244],[23.56977,120.30187],[23.56882,120.30144],[23.56883,120.30124],[23.56872,120.30118],[23.56855,120.30120],[23.56850,120.30134],[23.56853,120.30145],[23.56866,120.30153]]], ['民主路', [[23.56867,120.30152],[23.56839,120.30243]]], ['義民路', [[23.56840,120.30244],[23.56818,120.30235],[23.56747,120.30222],[23.56656,120.30207],[23.56591,120.30196]]], ['陸橋', [[23.56580,120.30195],[23.56473,120.30176]]], ['東引道', [[23.56471,120.30174],[23.56430,120.30401]]], ['中山路', [[23.56442,120.30398],[23.56538,120.30418],[23.56644,120.30439],[23.56715,120.30452],[23.56772,120.30465]]], ['休息']]},
    '9': {n: '藝閣 三月廿一 晚間路線', p: [['廟前出發'], ['中山路', [[23.56769,120.30464],[23.56621,120.30434],[23.56455,120.30403]]], ['民生路', [[23.56456,120.30403],[23.56437,120.30494]]], ['益安路', [[23.56437,120.30494],[23.56515,120.30504],[23.56552,120.30514],[23.56608,120.30526],[23.56729,120.30549],[23.56762,120.30556],[23.56833,120.30602],[23.56861,120.30623],[23.56871,120.30622],[23.56997,120.30588]]], ['大同路', [[23.56997,120.30587],[23.57046,120.30450],[23.57083,120.30358]]], ['義民路', [[23.57082,120.30357],[23.56926,120.30284]]], ['中正路', [[23.56927,120.30284],[23.56884,120.30386],[23.56845,120.30454]]], ['廟後', [[23.56844,120.30455],[23.56848,120.30469],[23.56843,120.30488],[23.56833,120.30500],[23.56824,120.30501]]], ['廟東', [[23.56822,120.30501],[23.56789,120.30495],[23.56773,120.30493],[23.56769,120.30487]]], ['廟前', [[23.56769,120.30486],[23.56763,120.30474],[23.56763,120.30458]]], ['中山路', [[23.56762,120.30460],[23.56714,120.30450],[23.56620,120.30434]]], ['光明路', [[23.56620,120.30434],[23.56638,120.30328],[23.56657,120.30208],[23.56669,120.30104]]], ['文化路', [[23.56668,120.30104],[23.56724,120.30115],[23.56774,120.30119],[23.56851,120.30133]]], ['圓環'], ['休息']]},
    '10': {n: '藝閣 三月廿二 晚間路線', p: [['廟前出發'], ['中山路', [[23.56761,120.30463],[23.56715,120.30450],[23.56618,120.30435],[23.56526,120.30416],[23.56454,120.30402]]], ['集合後開始評審'], ['民生路', [[23.56455,120.30402],[23.56438,120.30493]]], ['益安路', [[23.56437,120.30494],[23.56514,120.30506],[23.56552,120.30516],[23.56606,120.30524],[23.56656,120.30536],[23.56706,120.30546],[23.56736,120.30552],[23.56764,120.30555],[23.56834,120.30602]]], ['公民路', [[23.56834,120.30601],[23.56871,120.30546],[23.56891,120.30512],[23.56939,120.30438],[23.56953,120.30411],[23.57005,120.30322],[23.57054,120.30225]]], ['文化路', [[23.57054,120.30225],[23.56961,120.30178],[23.56883,120.30144],[23.56884,120.30127],[23.56873,120.30117],[23.56857,120.30120],[23.56850,120.30131],[23.56854,120.30146],[23.56864,120.30154]]], ['民主路', [[23.56864,120.30152],[23.56837,120.30244]]], ['義民路', [[23.56838,120.30243],[23.56814,120.30234],[23.56761,120.30225],[23.56664,120.30210],[23.56582,120.30193],[23.56578,120.30188],[23.56501,120.30174]]], ['民生路', [[23.56501,120.30174],[23.56453,120.30401]]], ['中山路', [[23.56454,120.30402],[23.56621,120.30434],[23.56717,120.30450],[23.56768,120.30463]]], ['廟前定點評審'], ['民主路', [[23.56761,120.30457],[23.56772,120.30444],[23.56788,120.30437],[23.56801,120.30435],[23.56812,120.30358],[23.56825,120.30311],[23.56835,120.30265],[23.56841,120.30237],[23.56865,120.30154]]], ['圓環'], ['休息']]},
    '11': {n: '藝閣 三月廿三 晚間路線', p: [['廟前出發'], ['中山路', [[23.56763,120.30463],[23.56715,120.30450],[23.56614,120.30433],[23.56454,120.30401]]], ['民生路', [[23.56454,120.30402],[23.56504,120.30180]]], ['義民路', [[23.56504,120.30179],[23.56752,120.30226],[23.56821,120.30236],[23.56848,120.30249],[23.56932,120.30290],[23.57000,120.30324],[23.57084,120.30357]]], ['大同路', [[23.57084,120.30355],[23.57118,120.30256],[23.57157,120.30182]]], ['新民路', [[23.57156,120.30181],[23.57092,120.30144],[23.57049,120.30111],[23.56996,120.30091]]], ['中正路', [[23.57001,120.30094],[23.56970,120.30173],[23.56926,120.30289],[23.56885,120.30386],[23.56845,120.30454],[23.56848,120.30468],[23.56844,120.30482]]], ['仁和路', [[23.56844,120.30482],[23.56891,120.30511],[23.56998,120.30588]]], ['益安路', [[23.56997,120.30588],[23.56867,120.30622],[23.56853,120.30620],[23.56832,120.30602],[23.56761,120.30556],[23.56713,120.30547],[23.56654,120.30534],[23.56601,120.30524],[23.56512,120.30504],[23.56436,120.30494]]], ['民生路', [[23.56437,120.30495],[23.56456,120.30402]]], ['中山路', [[23.56456,120.30402],[23.56537,120.30418],[23.56632,120.30436],[23.56717,120.30450],[23.56770,120.30465]]], ['廟前頒獎及落馬儀式'], ['民主路', [[23.56763,120.30462],[23.56775,120.30441],[23.56793,120.30436],[23.56798,120.30439],[23.56807,120.30386],[23.56813,120.30349],[23.56836,120.30256],[23.56854,120.30198],[23.56865,120.30155]]], ['圓環'], ['圓滿結束']]},
  };

  var _ps = {}, _p = [], _vi = [], _vis = [];
  
  function f22 (l, c) { var arr = []; for (var i = 0; i < l.length; i++) if (typeof arr[parseInt (i / c, 10)] == 'undefined') arr[parseInt (i / c, 10)] = [l[i]]; else arr[parseInt (i / c, 10)][i % c] = l[i]; return arr; }
  function fap (w, h, q) { return 'M -' + (w / 2) + ' ' + (h / 2) + 'l ' + (w / 2) + ' -' + h + ' l ' + (w / 2) + ' ' + h + ' q -' + (w / 2) + ' -' + q + ' -' + w + ' 0'; }
  
  function fmkm (m, a, n, cn, u, i, c) {
    if (u > cn) {
      m.setPosition (new google.maps.LatLng (m.getPosition ().lat () + a, m.getPosition ().lng () + n));
    clearTimeout (window._fmkmTimer);
    window._fmkmTimer = setTimeout (function () {
      var b = ((1 / _p.length * 100) / u) * cn; _vp.setOptions ({ icons: _vs.map (function (t) { return {icon: t, offset: ((i / _p.length * 100) + b) + '%'};}) });
      fmkm (m, a, n, cn + 1, u, i, c);
    }, 25); } else { if (c) c (m); }
  }
  function fgu (w, n) { var aa = w.lat () - n.lat (), al = w.lng () - n.lng (); var aad = ((Math.abs (aa) + Math.abs (al)) / 2); var u = aad < 10 ? aad < 1 ? aad < 0.1 ? aad < 0.01 ? aad < 0.001 ? aad < 0.0001 ? 3 : 6 : 9 : 12 : 15 : 24 : 21; var a = aa / u, n = al / u; if (!((Math.abs (a) > 0) || (Math.abs (n) > 0))) return null; return { u: u, a: a, n: n }; }
  function fmkg (m, w, c, i) { var n = m.getPosition (); var u = fgu (w, n); 
    if (!u) return false;
    fmkm (m, u.a, u.n, 0, u.u, i, c); }
  function fmm (m, a, n, cn, u, c) {
    if (u > cn) { m.setCenter (new google.maps.LatLng (m.getCenter ().lat () + a, m.getCenter ().lng () + n)); clearTimeout (window.mmtr); window.mmtr = setTimeout (function () { fmm (m, a, n, cn + 1, u, c); }, 25); } else { if (c) c (m); } }
  function fmg (m, w, c) { var now = m.center; var u = fgu (w, now); if (!u) return false; fmm (m, u.a, u.n, 0, u.u, c); }
  
  /* Location info */
  function _flo (isFirst) {
    if ($o.hasClass ('l')) return;
    $o.addClass ('l');

    navigator.geolocation.getCurrentPosition (function (position) {
      if (isFirst === true) {
        $o.addClass ('s').click (_flo);
      } else {
        var t = new google.maps.LatLng (position.coords.latitude, position.coords.longitude);
        _vy.setOptions ({ map: _vm, zIndex: _va.zIndex + 1, position: t });
        _vm.setOptions ({ center: t, zoom: 16 });
      }

      _vl = {
        lat: position.coords.latitude,
        lng: position.coords.longitude,
        acc: position.coords.accuracy,
      };

      var ct = _fsg ('ct'); if (ct && (new Date ().getTime () - ct < _tl)) return $o.removeClass ('l'); _fss ('ct', new Date ().getTime ());

      $.ajax ({
        url: window.apis.addLoc,
        async: true, cache: false, dataType: 'json', type: 'get',
        data: _vl
      }).complete (function () { $o.removeClass ('l'); });

    }, function (e) { $o.removeClass ('l'); }, { enableHighAccuracy: true });
  }

  function flp (i){
    i = (i !== undefined) && ((i + 1) < _p.length) ? i + 1 : 0;
    clearTimeout (_tr); _tr = setTimeout (function () {
      fmkg (_va, _p[i], flp (i), i);
    }, 150);
  }

  function fsp () {
    if (!$select.hasClass ('s')) return;

    _vis.forEach (function (t) { t.setMap (null); });
    _vpt.setPath ([]);

    _p = _ps[$select.val ()].map (function (t) { return new google.maps.LatLng (t[0] / Math.pow (10, 6) + 23, t[1] / Math.pow (10, 6) + 120); });
    var _i = [].concat (_vi[$select.val ()].map (function (t) { return [t[0], new google.maps.LatLng (t[1][0] / Math.pow (10, 6) + 23, t[1][1] / Math.pow (10, 6) + 120)]; }));
    // var _i = [['起馬', _p[0]], ['下馬', _p[_p.length - 1]]].concat (_vi[$select.val ()].map (function (t) { return [t[0], new google.maps.LatLng (t[1][0] / Math.pow (10, 6) + 23, t[1][1] / Math.pow (10, 6) + 120)]; }));

    $p.empty ().append (
      $('<h3 />').text (pss[$select.val ()].n)).append (
      $('<ul />').append (pss[$select.val ()].p.map (function (t) { var $li = $('<li />'); if (typeof t[2] !== 'undefined') $li.attr ('title', t[2]); if (typeof t[1] !== 'undefined') $li.attr ('data-paths', JSON.stringify (t[1])).click (function () { if (!$p.is (':visible')) return; $(this).addClass ('active').siblings ().removeClass ('active'); var bs = new google.maps.LatLngBounds (); _vpt.setPath ($(this).data ('paths').map (function (t) { t = new google.maps.LatLng (t[0], t[1]); bs.extend (t); return t; })); _vm.fitBounds (bs); if (_vm.zoom > 18) _vm.setZoom (18); }); return $li.text (t[0]); })));

    
    clearTimeout (_tr);
    clearTimeout (window._fmkmTimer);
    _vp.setPath (_p);
    _va.setPosition (_p[0]);
    setTimeout (flp, 1000);
    _vp.setOptions ({ icons: _vs.map (function (t) { return {icon: t, offset: '0%'};}) });

    _vis = _i.map (function (t, i) {
      return new OAML ({
        map: _vm,
        labelAnchor: new google.maps.Point (10 / 2, 10 / 2),
        icon: {path: 'M 0 0'},
        zIndex: (_vz ? _vz.zIndex : 0) - (i + 1),
        labelClass: 'if' + (_vz && _vz.position.lat () == t[1].lat () && _vz.position.lng () == t[1].lng () ? ' o' : ''),
        position: t[1], labelContent: '<div>' + t[0] + '</div>'
      });
    });
  }
  function  fnp (v) {
    if (!$p.is (':visible')) return;
    if (!$p.find ('.active').length) return $p.find ('li[data-paths]').first ().click ();
    if (v == 1) if ((t = $p.find ('.active').nextAll ('li[data-paths]')).length) return t.eq (0).click (); else return $p.find ('li[data-paths]').first ().click ();
    else if ((t = $p.find ('.active').prevAll ('li[data-paths]')).length) return t.eq (0).click (); else return $p.find ('li[data-paths]').last ().click ();
  }

  function fmgc (c1, c2, p) {
    function mc (a, b) { return a + Math.round ((b - a) * p); }
    function mcp (n) { var str = Math.max (Math.min (n, 255), 0).toString (16); if (str.length < 2) str = '0' + str; return str; }
    var nc = {};
    nc.r = mc (c1.r, c2.r); nc.g = mc (c1.g, c2.g); nc.b = mc (c1.b, c2.b);
    return "#" + mcp (nc.r) + mcp (nc.g) + mcp (nc.b);
  }
  function _fapi (isFirst){
    if (_isl) return;
    _isl = true;

    $.ajax ({
      url: 'https://pic.mazu.ioa.tw/api/p.json',
      async: true, cache: false, dataType: 'json', type: 'get',
      data: {}
    }).done (function (a) {
      if (_v === null) _v = a[0];
      if (a[0] != _v) location.reload (true);

      var v = a.shift ();
      _n = a.shift ();

      var zi = 99999999;

      _vzs = _vzs.map (function (t) { t._ps.forEach (function (u) { u.setMap (null); }); t.setMap (null); return t; }).filter (function () { return false; });
      _vzs = a.map (function (t, i) {
        var p = f22 (t[2], 3).map (function (u) {
          return new google.maps.LatLng (u[0] / Math.pow (10, 6) + 23, u[1] / Math.pow (10, 6) + 120);
        });

        if (!p.length) p = [new google.maps.LatLng (23.567762179007968, 120.30463546514511)];

        var m = new OAML ({
          map: _vm, position: p[0], icon: {path: 'M 0 0'}, labelClass: 'mz', labelAnchor: new google.maps.Point (50 / 2, 50), zIndex: zi - i,
          labelContent: '<div><div><span>' + t[0] + '</span></div><img src="' + t[1] + '"/></div>' });


        m._ps = [];
        p = p.reverse ();

        for (i = 0; p.length > 2 && (!i || i < p.length - 1); i++) {
          m._ps.push (new google.maps.Polyline ({
            map: _vm,
            strokeColor: fmgc ({r: 255, g: 255, b: 255}, {r: 73, g: 137, b: 242},  (1 / p.length) * i),
            strokeWeight: (5 / p.length) * i,
            path: [p[i], p[i + 1]]
          }));
        }

        return m;
      }).filter (function (t) {
        return t !== null;
      });

      var $t = $select.removeClass ('s').find ('option[value="' + _n + '"]');
      if ($t.length) $t.prop ('selected', true) && $select.addClass ('s');
      fsp ();

      if (isFirst === true) {
        _flo (isFirst);

        if (_vzs.length) {
          var bs = new google.maps.LatLngBounds ();
          _vzs.forEach (function (t) { bs.extend (t.position); })
          _vm.fitBounds (bs);
        }

        $(window).keyup (function (e) { if (e.keyCode == 40) fnp (1); if (e.keyCode == 38) fnp (-1); });
        $('#y, #container').addClass ('a');
        setTimeout (function () { $('#y').remove (); clearTimeout (_tlhf); _tlhf = null; }, 275);
      }
    }).complete (function () {
      _isl = false;
    });
  }
  function fin (){
    if (_vml) return ; _vml = true;
    
    function OAIN(e,t){function i(){}i.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new i,e.prototype.constructor=e}
    function OAML_(e,t,i){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=OAML_.getSharedCross(t)}
    OAML = function (e) {e=e||{},e.labelContent=e.labelContent||"",e.initCallback=e.initCallback||function(){},e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0),e.labelClass=e.labelClass||"markerLabels",e.labelStyle=e.labelStyle||{},e.labelInBackground=e.labelInBackground||!1,"undefined"==typeof e.labelVisible&&(e.labelVisible=!0),"undefined"==typeof e.raiseOnDrag&&(e.raiseOnDrag=!0),"undefined"==typeof e.clickable&&(e.clickable=!0),"undefined"==typeof e.draggable&&(e.draggable=!1),"undefined"==typeof e.optimized&&(e.optimized=!1),e.crossImage=e.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",e.handCursor=e.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",e.optimized=!1,this.label=new OAML_(this,e.crossImage,e.handCursor),google.maps.Marker.apply(this,arguments)}
    OAIN (OAML_,google.maps.OverlayView),OAML_.getSharedCross=function(e){var t;return"undefined"==typeof OAML_.getSharedCross.crossDiv&&(t=document.createElement("img"),t.style.cssText="position: absolute; z-index: 1000002; display: none;",t.style.marginLeft="-8px",t.style.marginTop="-9px",t.src=e,OAML_.getSharedCross.crossDiv=t),OAML_.getSharedCross.crossDiv},OAML_.prototype.onAdd=function(){var e,t,i,s,a,r,o,n=this,l=!1,g=!1,p=20,_="url("+this.handCursorURL_+")",v=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},h=function(){n.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof OAML_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),OAML_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(n.marker_.getDraggable()||n.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(n.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!n.marker_.getDraggable()&&!n.marker_.getClickable()||g||(this.style.cursor=n.marker_.getCursor(),google.maps.event.trigger(n.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){g=!1,n.marker_.getDraggable()&&(l=!0,this.style.cursor=_),(n.marker_.getDraggable()||n.marker_.getClickable())&&(google.maps.event.trigger(n.marker_,"mousedown",e),v(e))}),google.maps.event.addDomListener(document,"mouseup",function(t){var i;if(l&&(l=!1,n.eventDiv_.style.cursor="pointer",google.maps.event.trigger(n.marker_,"mouseup",t)),g){if(a){i=n.getProjection().fromLatLngToDivPixel(n.marker_.getPosition()),i.y+=p,n.marker_.setPosition(n.getProjection().fromDivPixelToLatLng(i));try{n.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(h,1406)}catch(r){}}n.crossDiv_.style.display="none",n.marker_.setZIndex(e),s=!0,g=!1,t.latLng=n.marker_.getPosition(),google.maps.event.trigger(n.marker_,"dragend",t)}}),google.maps.event.addListener(n.marker_.getMap(),"mousemove",function(s){var _;l&&(g?(s.latLng=new google.maps.LatLng(s.latLng.lat()-t,s.latLng.lng()-i),_=n.getProjection().fromLatLngToDivPixel(s.latLng),a&&(n.crossDiv_.style.left=_.x+"px",n.crossDiv_.style.top=_.y+"px",n.crossDiv_.style.display="",_.y-=p),n.marker_.setPosition(n.getProjection().fromDivPixelToLatLng(_)),a&&(n.eventDiv_.style.top=_.y+p+"px"),google.maps.event.trigger(n.marker_,"drag",s)):(t=s.latLng.lat()-n.marker_.getPosition().lat(),i=s.latLng.lng()-n.marker_.getPosition().lng(),e=n.marker_.getZIndex(),r=n.marker_.getPosition(),o=n.marker_.getMap().getCenter(),a=n.marker_.get("raiseOnDrag"),g=!0,n.marker_.setZIndex(1e6),s.latLng=n.marker_.getPosition(),google.maps.event.trigger(n.marker_,"dragstart",s)))}),google.maps.event.addDomListener(document,"keydown",function(e){g&&27===e.keyCode&&(a=!1,n.marker_.setPosition(r),n.marker_.getMap().setCenter(o),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(n.marker_.getDraggable()||n.marker_.getClickable())&&(s?s=!1:(google.maps.event.trigger(n.marker_,"click",e),v(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(n.marker_.getDraggable()||n.marker_.getClickable())&&(google.maps.event.trigger(n.marker_,"dblclick",e),v(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(e){g||(a=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(e){g||a&&(n.setPosition(p),n.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(e){g||a&&n.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){n.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){n.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){n.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){n.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){n.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){n.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){n.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){n.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){n.setStyles()})]},OAML_.prototype.onRemove=function(){var e;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e])},OAML_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},OAML_.prototype.setContent=function(){var e=this.marker_.get("labelContent");"undefined"==typeof e.nodeType?(this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(e))},OAML_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},OAML_.prototype.setStyles=function(){var e,t;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle");for(e in t)t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},OAML_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},OAML_.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},OAML_.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},OAML_.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},OAML_.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display;var e=this.marker_.get("initCallback");e(this.labelDiv_)},OAIN(OAML,google.maps.Marker),OAML.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(e)};

    var p = new google.maps.LatLng (_lat, _lng);
    _vm = new google.maps.Map ($maps.get (0), { zoom: 16, disableDefaultUI: true, gestureHandling: 'greedy', center: p });
    _vm.mapTypes.set ('style1', new google.maps.StyledMapType ([{featureType: 'administrative.land_parcel', elementType: 'labels', stylers: [{visibility: 'on'}]}, {featureType: 'poi', elementType: 'labels.text', stylers: [{visibility: 'off'}]}, {featureType: 'poi.business', stylers: [{visibility: 'on'}]}, {featureType: 'poi.park', elementType: 'labels.text', stylers: [{visibility: 'on'}]}, {featureType: 'road.local', elementType: 'labels', stylers: [{visibility: 'on'}]}]));
    _vm.setMapTypeId ('style1');
    _vm.addListener ('click', function (e) {
        console.error (e.latLng.lat () + ',' + e.latLng.lng ());
    })


    $('#z').find ('a').click (function () { _vm.setZoom (_vm.zoom + ($(this).index () ? -1 : 1)); });

    _vs = [
        { path: fap (6, 9, 6), strokeColor: 'rgba(50, 60, 140, 1)', strokeWeight: 1, fillColor: 'rgba(68, 77, 145, .85)', fillOpacity: 1 },
        { path: fap (3, 3.8, 2.5), strokeColor: 'rgba(255, 255, 255, 1)', strokeWeight: 1, fillColor: 'rgba(255, 255, 255, 1)', fillOpacity: 1 },
        { path: fap (3, 3.8, 2.5), strokeColor: 'rgba(255, 255, 255, 1)', strokeWeight: 1, fillColor: 'rgba(223, 93, 84, 1)', fillOpacity: 1 }
      ];

    _va = new google.maps.Marker ({
      map: _vm,
      position: p,
      icon: {path: 'M 0 0'}
    });
    _vy = new OAML ({ icon: {path: 'M 0 0'}, labelAnchor: new google.maps.Point (50 / 2, 50 / 2), zIndex: 0, labelClass: 'my', labelContent: '<img src="img/user.png"/>'});
    _vp = new google.maps.Polyline ({
      map: _vm, strokeColor: 'rgba(250, 131, 131, .7500)', strokeWeight: 3,
      icons: _vs.map (function (t) { return {icon: t, offset: '0%'};})
    });
    
    _vpt = new google.maps.Polyline ({
      map: _vm, strokeColor: 'rgba(52, 168, 83, .500)', strokeWeight: 12,
    });

    _ps = $maps.data ('paths');
    _vi = $maps.data ('infos');
    
    _fapi (true);
    setInterval (_fapi, _tp)
    setInterval (function () { window.location.replace ('https://mazu.ioa.tw' + '?f=rl'); }, _tr2);    
  }
  function flgm (){
    var k = _ks[Math.floor ((Math.random() * _ks.length))], s = document.createElement ('script');
    s.setAttribute ('type', 'text/javascript');
    s.setAttribute ('src', 'https://maps.googleapis.com/maps/api/js?' + (k ? 'key=' + k + '&' : '') + 'language=zh-TW&libraries=visualization&callback=gmc');
    (document.getElementsByTagName ('head')[0] || document.documentElement).appendChild (s);
    s.onload = fin;
  }
  $(window).bind ('gm', fin);
  flgm ();
});